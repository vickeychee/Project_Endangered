<!DOCTYPE html>
<html lang="en">
<head>

    <title>Project Endangered</title>
    <meta name="description" content="Project Endagered WebVR">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" viewport-fit=cover>


    <!--External Components-->

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/grassland_stylesheet.css">
    <link rel="stylesheet" href="/css/grassland_loading_animation.css">



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="js/controlPanel.js"></script>
    <script src="js/userInterface.js"></script>
    <script src="js/startExperience.js"></script>
    <script src="js/factTask.js"></script>



   <script> 
        function load_page(){
    
            deviceChoice = 1;
            //deviceChoice= (localStorage.getItem("device"));
            //console.log(deviceChoice);
    
    
            qr=new XMLHttpRequest();
    
            if (deviceChoice == 1){
                qr.open('get','grassland-UI-desktop.html');
           // } else if(deviceChoice == 2){
              //  qr.open('get','prairies-UI-mobile.html');
            }
            qr.send();
            qr.onload=function(){includedContent.innerHTML=qr.responseText}
            };load_page();
    
        </script> 
    
</head>
<body>
    <div id="includedContent"></div>
    <a-scene start-experience renderer="gammaOutput: true;" shadow="type: pcfsoft" vr-mode-ui="enabled: false" id="scene" shadow="autoUpdate: false" >

        <a-assets timeout = "10000">
        
            <!--Envrionment Assets-->
            <a-asset-item id="environment-obj" crossorigin="anonymous" src="/assets/grassland_environment.glb"></a-asset-item> 
            <a-asset-item id="road-obj" crossorigin="anonymous" src="/assets/road.glb"></a-asset-item> 
            <a-asset-item id="apartment-obj" crossorigin="anonymous" src="/assets/apartment.glb"></a-asset-item> 
            <a-asset-item id="factory-obj" crossorigin="anonymous" src="/assets/factory.glb"></a-asset-item> 
            <a-asset-item id="panel-obj" crossorigin="anonymous" src="/assets/control_panel.glb"></a-asset-item> 
            <a-asset-item id="sign-obj" crossorigin="anonymous" src="/assets/sign.glb"></a-asset-item> 
            <a-asset-item id="elephant-obj" crossorigin="anonymous" src="/assets/elephant.glb"></a-asset-item>

            <audio id="wind_sound" src="/assets/audio/wind.mp3" preload="auto"></audio>
            <audio id="music_sound" src="/assets/audio/music.mp3" preload="auto"></audio>
            <audio id="bird_sound" src="/assets/audio/birds.mp3" preload="auto"></audio>

            <audio id="click_sound" src="/assets/audio/click.mp3" preload="auto"></audio>
            <audio id="apartment_sound" src="/assets/audio/apartment.mp3" preload="auto"></audio>
            <audio id="car_sound" src="/assets/audio/car.mp3" preload="auto"></audio>
            <audio id="factory_sound" src="/assets/audio/factory.mp3" preload="auto"></audio>
            


        </a-assets>


    <!--Ambient Sounds-->
    <a-entity class="ambient-music" id ="wind" sound="src:#wind_sound; autoplay:false; loop:true; volume:6;" position="0 10 -2.751"></a-entity>
    <a-entity class="ambient-music" id ="music" sound="src:#music_sound; autoplay:false; loop:true; volume:3;" position="0 10 -2.751"></a-entity>
    <a-entity class="ambient-music" id ="bird" sound="src:#bird_sound; autoplay:false; loop:true; volume:2;" position="0 10 -2.751"></a-entity>

    <!--Lighting-->

    <a-entity light="type: ambient; color: #c7f0cf; intensity: 0.71"></a-entity>
    <a-entity id="light_spot" light="type: point; color: #ffffff; intensity: 0.3; castShadow: true; shadowRadius: 2.52; shadowCameraFov: 92.680" position="-8.859 37.604 -19.138">
    </a-entity>


        <!--Player Controls-->
        <a-entity id="player" movement-controls="speed:0.2; constrainToNavMesh: true;" position="1.07 1.7 1.37">
            <a-entity
                id = "player2"
                camera="fov:70"
                wasd-controls='acceleration: 10'
                look-controls>
                <a-entity
                    id = "player-details"
                    collision-filter="group: mouse"
                    cursor="rayOrigin:mouse;"
                    raycaster="far:8; interval:200; objects:.interactive"
                ></a-entity> 
            </a-entity>
        </a-entity>

        <a-entity user-interface></a-entity>


        <!--Environment Models-->
    <a-entity
            id ="environment"
            environment="preset: default; groundColor: #445; grid:none; ground:none; lighting:none; skyType:gradient; skyColor:#24bdff; horizonColor:#dffafb; fog:0">
        </a-entity>

        <a-entity
            id="environment_model"
            position="-8.189 0.009 -3.842"
            rotation="0 101.580 0"
            scale= " 1 1 1"
            gltf-model="#environment-obj"
            shadow="cast:true; receive:true;">
        </a-entity>

        <a-entity
            control-panel
            id="apartment"
            position="-8.189 0.009 -3.842"
            rotation="0 101.580 0"
            scale= " 1 1 1"
            gltf-model="#apartment-obj"
            shadow="cast:true; receive:false;"
            visible='false'>
        </a-entity>

        <a-entity
            id="road"
            position="-8.189 0.009 -3.842"
            rotation="0 101.580 0"
            scale= " 1 1 1"
            gltf-model="#road-obj"
            shadow="cast:true; receive:false;"
            visible='false'>
        </a-entity>


       <a-entity
            id="factory"
            position="-8.189 0.009 -3.842"
            rotation="0 101.580 0"
            scale= " 1 1 1"
            gltf-model="#factory-obj"
            shadow="cast:true; receive:false;"
            visible='false'>
    </a-entity>


    <a-entity
        fact-task
        id="elephant1"
        class="interactive"
        position="-0.10575 0.15339 -6.074"
        rotation="0 140.07 0"
        gltf-model="/assets/elephant.glb"
        shadow="receive: false"
        scale="0.6 0.6 0.6"
        animation__mouseenter="property:scale; to: 0.65 0.65 0.65; startEvents:mouseenter; dur:200"
        animation__mouseleave="property:scale; to: 0.6 0.6 0.6; startEvents:mouseleave; dur:200">
    </a-entity>

    <a-entity
        id="elephant2"
        class="interactive"
        position="1.81135 0.12853 -3.23238"
        rotation="0 42.03 0"
        gltf-model="/assets/elephant.glb"
        shadow="receive: false"
        scale="0.4 0.4 0.4"
        animation__mouseenter="property:scale; to: 0.45 0.45 0.45; startEvents:mouseenter; dur:200"
        animation__mouseleave="property:scale; to: 0.4 0.4 0.4; startEvents:mouseleave; dur:200">
    </a-entity>

    <a-entity
        id="elephant3"
        class="interactive"
        position="-15.13995 0.167 -3.35672"
        rotation="0 159.35 0"
        gltf-model="/assets/elephant.glb"
        shadow="receive: false"
        scale="0.8 0.8 0.8"
        animation__mouseenter="property:scale; to: 0.85 0.85 0.85; startEvents:mouseenter; dur:200"
        animation__mouseleave="property:scale; to: 0.8 0.8 0.8; startEvents:mouseleave; dur:200">
    </a-entity>

    <a-entity
        id="elephant4"
        class="interactive"
        position="-13.83427 0.167 -2.10703"
        rotation="0 -123.59 0"
        gltf-model="/assets/elephant.glb"
        shadow="receive: false"
        scale="0.4 0.4 0.4"
        animation__mouseenter="property:scale; to: 0.45 0.45 0.45; startEvents:mouseenter; dur:200"
        animation__mouseleave="property:scale; to: 0.4 0.4 0.4; startEvents:mouseleave; dur:200">
    </a-entity>

    <a-entity
        id="sign"
        position="-2.97364 0 -2.12991"
        rotation="0 44.55 0"
        gltf-model="/assets/sign.glb"
        shadow="receive: false">
    </a-entity>


    <a-entity id="panel" position="-1.707 0.649 -2.939" rotation="-30.000 37.670 0" scale="">
        <a-entity text="value: See the effects of habitat loss by clicking the buttons on the control panel; align: center; color: #013440; lineHeight: 62.04; font: /assets/fonts/Poppins-SemiBold-msdf.json; negate: false; width: 1.87; baseline: top; wrapCount: 35.56" position="-0.00251 0.37443 -0.03452"></a-entity>
        <a-entity text="value: Human Settlements; align: center; color: #013440; lineHeight: 55; font: /assets/fonts/Poppins-Regular-msdf.json; negate: false; width: 0.61; wrapCount: 13.82" position="-0.59701 -0.01668 -0.03388"></a-entity>
        <a-entity text="value: Linear Infrastructure; align: center; color: #013440; lineHeight: 55; font: /assets/fonts/Poppins-Regular-msdf.json; negate: false; width: 0.61; baseline: top; wrapCount: 13.82" position="0.009 0.04464 -0.03149"></a-entity>
        <a-entity text="value: Industry Developments; align: center; color: #013440; lineHeight: 55; font: /assets/fonts/Poppins-Regular-msdf.json; negate: false; width: 0.61; wrapCount: 13.82" position="0.65039 -0.00785 -0.0308"></a-entity>
        
        <a-entity id="box" position="0 -0.863 0.36" rotation="-30.25 0 0" scale="1.25 1.25 1.25" gltf-model="/assets/control_panel.glb" visible="" shadow="receive: false">
        </a-entity>
        <a-entity
            id="button1" 
            class="interactive"
            position="-0.59 -0.358 0.010"
            rotation="-90 0 0"
            geometry="primitive: cylinder; radius: 0.12; height: 0.1"
            material="color: #f750e0"
            animation__click="property: position; from: -0.59 -0.358 -0.044; to: -0.59 -0.358 0.010;
            startEvents: click; dur: 100">
        </a-entity>    

        <a-entity
            id="button2"
            class="interactive"
            position="-0.010 -0.358 0.010"
            rotation="-90 0 0"
            geometry="primitive: cylinder; radius: 0.12; height: 0.1"
            material="color: #f750e0"
            animation__click="property: position; from: -0.010 -0.358 -0.044; to: -0.010 -0.358 0.010; startEvents: click; dur: 100">
        </a-entity>

        <a-entity
            id="button3"
            class="interactive"
            position="0.643 -0.358 0.010" 
            rotation="-90 0 0"
            geometry="primitive: cylinder; radius: 0.12; height: 0.1"
            material="color: #f750e0"
            animation__click="property: position; from:0.643 -0.358 -0.044; to: 0.643 -0.358 0.010; startEvents: click; dur: 100">
        </a-entity> 
    </a-entity>

    <a-ocean
        id = 'river'
        class="interactive"
        position='-4.595 -0.159 -3.531'
        rotation = '-90.000 11.460 0'
        scale='3.870 43.170 12.500'
        color ="#074b54"
        ocean="opacity:0.9;  depth:1.1dw;  density: 10;  amplitude:0.000004;  amplitudeVariance:0.003;  speed:1;  speedVariance:0.9">
    </a-ocean> 


        
    </a-scene>
</body>
</html>