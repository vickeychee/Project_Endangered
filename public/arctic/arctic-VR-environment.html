<!DOCTYPE html>
<html lang="en">
<head>

    <!--<base href="https://vickeychee.github.io/Project_Endangered/public/arctic/">-->
    <title>Project Endangered</title>
    <link rel="icon" href="https://i.ibb.co/bmMvc5p/Project-Endangered-Logo-Colored-1.png"/>
    <title>Project Endangered</title>
    <meta name="description" content="Project Endagered WebVR">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" viewport-fit=cover>
    

    <!--External Components-->
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/takahirox/aframe-rain/master/build/aframe-rain.min.js"></script>

    <!--Custom Components-->

    <script src="js/startExperience.js"></script>



    <!--Styles-->
    <link rel="stylesheet" href="./css/arctic_loading_animation.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    
    <div id="user-gesture-overlay">
        <div class= "center">
            <img id="loading-animation" src="css/imgs/arctic_loading.gif">
        </div>

        <div id="continue-container">
            <div class ="continue-parent">
                <div class="continue-child"><img id="continue-bear" src="css/imgs/arctic_polarhead.png"></div>
                <div class="continue-child continue-text">The arctic is ready for you to explore!</div>
                <div class="continue-child"><button id="user-gesture-button" onclick="startExperience();">BEGIN</button></div>
            </div>
        </div>
    </div>

    

    
</head>
<body>

    <a-scene  vr-mode-ui="enabled: true" start-experience id="scene" physics="restitution: 0; debug:false; shadow=autoUpdate: false" rain="count:0; splashBounce:0.5; splashGravity: 9.8*0.5; dropHeight:0.25; opacity:1; dropRadius:0.1; height: 100; color: white; splash: false; width:50">

        <a-assets timeout = "10000">
        
            <!--Envrionment Assets-->
            <a-asset-item id="seal-obj" crossorigin="anonymous" src="./assets/seal.glb"></a-asset-item>  
            <a-asset-item id="environment-obj" crossorigin="anonymous" src="./assets/environment-present.glb"></a-asset-item> 
            <a-asset-item id="polarBear-obj" crossorigin="anonymous" src="./assets/polarBear.glb"></a-asset-item>  
            <a-asset-item id="ice1-obj" crossorigin="anonymous" src="./assets/ice1.glb"></a-asset-item> 
            <a-asset-item id="ice2-obj" crossorigin="anonymous" src="./assets/ice2.glb"></a-asset-item> 
            <a-asset-item id="ice3-obj" crossorigin="anonymous" src="./assets/ice3.glb"></a-asset-item> 
            <a-asset-item id="ice4-obj" crossorigin="anonymous" src="./assets/ice4.glb"></a-asset-item> 
            <a-asset-item id="ice5-obj" crossorigin="anonymous" src="./assets/ice5.glb"></a-asset-item> 
            <a-asset-item id="ice6-obj" crossorigin="anonymous" src="./assets/ice6.glb"></a-asset-item> 
            <a-asset-item id="navPresent-obj" response-type="arraybuffer" src="./assets/nav-present/nav-present.gltf"></a-asset-item>       
            <img id="sky" src="./assets/stars.png"> 

            <!--Audio Assets-->
            <audio id="wind_sound" src="./assets/audio/arctic/wind.mp3" preload="auto"></audio>
            <audio id="river_sound" src="./assets/audio/arctic/water.mp3" preload="auto"></audio>
            <audio id="piano_sound" src="./assets/audio/arctic/piano.mp3" preload="auto"></audio>

        </a-assets>


        <!--Ambient Sounds-->
        <a-entity class="ambient-music" id ="piano_music" sound="src:#piano_sound; autoplay:false; loop:true; volume:2;" position="0 10 -8.23"></a-entity>
        <a-entity class="ambient-music" id = "wind_sound" sound="src:#wind_sound; autoplay:false; loop:true; volume:2;"  position="0 10 -8.23"></a-entity>

       
        <!--Lighting-->
        <a-entity light="type: ambient; color: #dcd3d3; intensity:0.99" ></a-entity>
        <a-entity id = "light_spot"
                light="type: point; color: #FFF; intensity: 0.23; castShadow: true; shadowRadius: 2.5"
                position="-1.246 16.753 -4.678">
        </a-entity>

        <!--Player Controls-->
        <a-entity id="player" movement-controls="speed:0.2; constrainToNavMesh: true;" position="0 1.3 0">
            <a-entity
                id = "player2"
                camera="fov:70"
                wasd-controls='acceleration: 10'
                look-controls>
                <a-entity
                    id = "player-details"
                    collision-filter="group: mouse"
                    cursor="rayOrigin:mouse;"
                    raycaster="far:20; interval:200; objects:.interactive"
                ></a-entity> 
            </a-entity>
        </a-entity>


        <!--Nav Mesh-->
        <a-entity>
            <a-entity
                id ="nav_mesh"
                scale='1 1 1'
                position = '-2.806 1.3 -9'
                rotation = '0 180 0'
                gltf-model='#navPresent-obj'
                nav-mesh
                visible='false'
            ></a-entity>
        </a-entity>




    
        <!--Environment Models-->
    <a-entity
            id ="environment"
            environment="preset: default; groundColor: #445; grid:none; ground:none; lighting:none; skyType:gradient; skyColor:#006f85; horizonColor:#fff">
        </a-entity>

        <a-entity
            id="environment_model"
            class="interactive"
            position="-2.806 0.009 -9"
            rotation="0 180 0"
            scale= " 1 1 1"
            gltf-model="#environment-obj"
            shadow="cast:false; receive:true;">
        </a-entity>

    <a-sky src="#sky" scale="0.3 0.3 0.3" color="#fffff" opacity ="0.5" blending="additive" material = "alphaTest: 0.48;"></a-sky>

    <a-ocean
            id = 'river'
            position='-9.2 -0.534 -15'
            rotation = '-90.000 0 0'
            scale='3.82 38.67 12.5'
            color ="#0FAEBF"
            class="ambient-music"
            sound =  "src:#river_sound; autoplay:false; loop:true; volume: 3;"
            ocean="opacity:0.9;  depth:1;  density: 10;  amplitude:0.000005;  amplitudeVariance:0.01;  speed:2.1;  speedVariance:1.070">
        </a-ocean> 

        <!--Seals-->
        <a-entity
            id="seal1"
            class="interactive"
            position="-13.76 -0.101 -30.78"
            rotation = "0 207 0"
            scale= "2.3 2.3 2.3"
            gltf-model="#seal-obj"
            visible="true"
            shadow="cast:true; receive:false;">
        </a-entity>

        <a-entity
            id="seal2"
            class="interactive"
            position="6.012 -0.132 -24.854"
            rotation = "-13.280 127.8 0"
            scale= " 1.8 1.8 1.8"
            gltf-model="#seal-obj"
            visible="true"
            shadow="cast:true; receive:false;">
        </a-entity>

        <a-entity
            id="seal3"
            class="interactive"
            position="-21.809 0.017 -15.807"
            rotation = "-13.36 246.120 0"
            scale= " 2 2 2"
            gltf-model="#seal-obj"
            visible="true"
            shadow="cast:true; receive:false;">
        </a-entity>

        
        <a-entity
            id="seal4"
            class="interactive"
            position="10.73 0.08 -16.5"
            rotation = "-21.82 109.9 -12.78"
            scale= " 1.8 1.8 1.8"
            gltf-model="#seal-obj"
            visible="true"
            shadow="cast:true; receive:false;">
        </a-entity>

        
        <a-entity
            id="seal5"
            class="interactive"
            position="-0.89 -0.222 -9.668"
            rotation = "0 234 0"
            scale= " 1.8 1.8 1.8"
            gltf-model="#seal-obj"
            visible="true"
            shadow="cast:true; receive:false;">
        </a-entity>


        <a-entity
            id="seal6"
            class="interactive"
            position="1 -0.228 -10.4"
            rotation = "0 53.820 0"
            scale= " 1.8 1.8 1.8"
            gltf-model="#seal-obj"
            visible="true"
            shadow="cast:true; receive:false;">
        </a-entity>





        <!--Polar Bears-->
        <a-entity
            id="polarBear1"
            class="interactive"
            position="2.97 0 -3.31"
            rotation = "0 25 0"
            scale= " 0.7 0.7 0.7"
            gltf-model="#polarBear-obj"
            shadow="cast:true; receive:false;">
        </a-entity>

        <a-entity
            id="polarBear2"
            class="interactive"
            position="2.4 0 -4.2"
            rotation = "0 25 0"
            scale= " 1 1 1 "
            gltf-model="#polarBear-obj"
            shadow="cast:true; receive:false;">
        </a-entity>

        <a-entity
            id="polarBear3"
            class="interactive"
            position="-2.09 0 -4.182"
            rotation = "0 -119.740 0"
            scale= " 1 1 1 "
            gltf-model="#polarBear-obj"
            shadow="cast:true; receive:false;">
        </a-entity>


    </a-scene>
</body>
</html>