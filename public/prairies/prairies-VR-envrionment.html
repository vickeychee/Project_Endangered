<!DOCTYPE html>
<html lang="en">
<head>

    <title>Project Endangered</title>
    <meta name="description" content="Project Endagered WebVR">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" viewport-fit=cover>
    

    <!--New environment setup-->

    <!--External Components-->
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <script src="js/startExperience.js"></script>
    
</head>
<body>
    <a-scene start-experience renderer="gammaOutput: true;" shadow="type: pcfsoft" vr-mode-ui="enabled: true" id="scene" physics="restitution: 0; debug:false; shadow=autoUpdate: false">

        <a-assets timeout = "10000">
        
            <!--Envrionment Assets-->
            <a-asset-item id="environment-obj" crossorigin="anonymous" src="/assets/prairies_environment.glb"></a-asset-item> 
            <a-asset-item id="lily-obj" crossorigin="anonymous" src="/assets/lily_pad.glb"></a-asset-item> 
            <a-asset-item id="crop-obj" crossorigin="anonymous" src="/assets/crop.glb"></a-asset-item> 
            <a-asset-item id="bucket-obj" crossorigin="anonymous" src="/assets/bucket_empty.glb"></a-asset-item> 
            <a-asset-item id="target-obj" crossorigin="anonymous" src="/assets/target.glb"></a-asset-item> 
            <a-asset-item id="gun-obj" crossorigin="anonymous" src="/assets/gun.glb"></a-asset-item> 
            <a-asset-item id="sign-obj" crossorigin="anonymous" src="/assets/sign.glb"></a-asset-item> 
            <a-asset-item id="crane-obj" crossorigin="anonymous" src="/assets/crane.glb"></a-asset-item> 


            <!--Audio Assets-->
            <audio id="water_sound" src="/assets/audio/water.mp3" preload="auto"></audio>
            <audio id="music_sound" src="/assets/audio/music.mp3" preload="auto"></audio>
            <audio id="marsh_sound" src="/assets/audio/marsh.mp3" preload="auto"></audio>
            <audio id="click_sound" src="/assets/audio/click.mp3" preload="auto"></audio>
 

        </a-assets>

  <!--Ambient Sounds-->
  <a-entity class="ambient-music" id ="marsh" sound="src:#marsh_sound; autoplay:true; loop:true; volume:6;" position="0 10 -2.751"></a-entity>
  <a-entity class="ambient-music" id ="music" sound="src:#music_sound; autoplay:true; loop:true; volume:3;" position="0 10 -2.751"></a-entity>
  

    <!--Lighting-->

    <a-entity light="type: ambient; color: #f4aeae; intensity: 0.47"></a-entity>
    <a-entity id="light_spot" light="type: point; color: #feb4b4; intensity: 0.28; castShadow: true; shadowRadius: 2.52; shadowCameraFov: 92.15" position="-10.2275 31.31855 7.9395">
    </a-entity>
    </a-entity>


        <!--Player Controls-->
        <a-entity id="player" movement-controls="speed:0.2; constrainToNavMesh: true;" position="0 1.3 2.7">
            <a-entity
                id = "player2"
                camera="fov:70"
                wasd-controls='acceleration: 10'
                look-controls>
                <a-entity
                    id = "player-details"
                    collision-filter="group: mouse"
                    cursor="rayOrigin:mouse;"
                    raycaster="far:20; interval:200; objects:.interactive"
                ></a-entity> 
            </a-entity>
        </a-entity>


        <!--Environment Models-->
    <a-entity
            id ="environment"
            environment="preset: default; groundColor: #445; grid:none; ground:none; lighting:none; skyType:gradient; skyColor:#fd688d; horizonColor:#f5a951; fog:0.91">
        </a-entity>

        <a-entity
            id="environment_model"
            position="0.442 0.009 -4.969"
            rotation="0 171.220 0"
            scale= " 1 1 1"
            gltf-model="#environment-obj"
            shadow="cast:true; receive:true;">
        </a-entity>


        <a-entity
            id="crane1"
            class="interactive"
            position="2.081 0 -4.475"
            rotation="0 201 0"
            scale= " 1 1 1"
            gltf-model="#crane-obj"
            shadow="cast:true; receive:false;"
            animation__mouseenter="property:scale; to: 1.05 1.05 1.05; startEvents:mouseenter; dur:200"
            animation__mouseleave="property:scale; to: 1 1 1; startEvents:mouseleave; dur:200">
         </a-entity>

         <a-entity id="crane2"
                    class="interactive"
                    position="2.4392 0 -3.811"
                    rotation="0 196.29 0"
                    scale="0.75 0.75 0.75"
                    gltf-model="/assets/crane.glb"
                    shadow="receive: false"
                    animation__mouseenter="property: scale; to: 0.78 0.78 0.78; startEvents: mouseenter; dur: 200"
                    animation__mouseleave="property: scale; to: 0.75 0.75 0.75; startEvents: mouseleave; dur: 200">
        </a-entity>
        
        <a-entity id="crane3"
                class="interactive"
                position="-1.34072 0 -3.88052"
                rotation="0 21.7 0"
                scale=""
                gltf-model="/assets/crane.glb"
                shadow="receive: false"
                animation__mouseenter="property: scale; to: 1.05 1.05 1.05; startEvents: mouseenter; dur: 200"
                animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200">
        </a-entity>

        <a-entity id="crane4"
                class="interactive"
                position="-1.80301 0 -3.26395"
                rotation="0 9.53 0"
                scale="0.5 0.5 0.5"
                gltf-model="/assets/crane.glb"
                shadow="receive: false"
                animation__mouseenter="property: scale; to: 0.78 0.78 0.78; startEvents: mouseenter; dur: 200"
                animation__mouseleave="property: scale; to: 0.75 0.75 0.75; startEvents: mouseleave; dur: 200">
        </a-entity>



        <a-entity
            id="crop1"
            class="interactive crop"
            position="7.204 0 0.679"
            rotation="0 0 0"
            scale= " 1 1 1"
            gltf-model="#crop-obj"
            shadow="cast:true; receive:false;"
            animation__mouseenter="property:scale; to: 1.1 1.1 1.1; startEvents:mouseenter; dur:200"
            animation__mouseleave="property:scale; to: 1 1 1; startEvents:mouseleave; dur:200">
        </a-entity>

        <a-entity
            id="crop2"
            class="interactive crop"
            position="6.990 0 2.089"
            rotation="0 -34.680 0"
            scale= "1 1 1"
            gltf-model="#crop-obj"
            shadow="cast:true; receive:false;"
            animation__mouseenter="property:scale; to: 1.1 1.1 1.1; startEvents:mouseenter; dur:200"
            animation__mouseleave="property:scale; to: 1 1 1; startEvents:mouseleave; dur:200">
         </a-entity>

        <a-entity
            id="crop3"
            class="interactive crop"
            position="6.762 0 3.434"
            rotation="0 0 0"
            scale= " 1 1 1"
            gltf-model="#crop-obj"
            shadow="cast:true; receive:false;"
            animation__mouseenter="property:scale; to: 1.1 1.1 1.1; startEvents:mouseenter; dur:200"
            animation__mouseleave="property:scale; to: 1 1 1; startEvents:mouseleave; dur:200">
        </a-entity>

        <a-entity
            id="crop4"
            class="interactive crop"
            position="6.164 0 7.700"
            rotation="0 -31.550 0"
            scale= " 1 1 1"
            gltf-model="#crop-obj"
            shadow="cast:true; receive:false;"
            animation__mouseenter="property:scale; to: 1.1 1.1 1.1; startEvents:mouseenter; dur:200"
            animation__mouseleave="property:scale; to: 1 1 1; startEvents:mouseleave; dur:200">
        </a-entity>


        <a-entity
            id="crop5"
            class="interactive crop"
            position="5.952 0 9.102"
            rotation="0 22.440 0"
            scale= " 1 1 1"
            gltf-model="#crop-obj"
            shadow="cast:true; receive:false;"
            animation__mouseenter="property:scale; to: 1.1 1.1 1.1; startEvents:mouseenter; dur:200"
            animation__mouseleave="property:scale; to: 1 1 1; startEvents:mouseleave; dur:200">
         </a-entity>

        <a-entity
            id="crop6"
            class="interactive crop"
            position="5.741 0 10.462"
            rotation="0 -32.240 0"
            scale= " 1 1 1"
            gltf-model="#crop-obj"
            shadow="cast:true; receive:false;"
            animation__mouseenter="property:scale; to: 1.1 1.1 1.1; startEvents:mouseenter; dur:200"
            animation__mouseleave="property:scale; to: 1 1 1; startEvents:mouseleave; dur:200">
        </a-entity>

    <a-entity
        id="lily"
        class="interactive"
        position="0.442 0.009 -4.969"
        rotation="0 171.220 0"
        scale= " 1 1 1"
        gltf-model="#lily-obj"
        shadow="cast:true; receive:true;">
    </a-entity>

    <a-ocean
        id = 'river'
        class="interactive"
        position='1.521 -0.277 -13.578'
        rotation = '-90.000 0 0'
        scale='2.540 15.910 12.510'
        color ="#06454c"
        class="ambient-music"
        sound = "src:#water_sound; autoplay:true; loop:true; volume: 7;"
        ocean="opacity:0.9;  depth:1.1dw;  density: 10;  amplitude:0.000004;  amplitudeVariance:0.003;  speed:1;  speedVariance:0.9">
    </a-ocean> 

    </a-scene>
</body>
</html>